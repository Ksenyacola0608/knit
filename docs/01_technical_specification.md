# Техническое задание: Платформа услуг ручного труда

## 1. Общее описание проекта

### 1.1 Назначение системы
Веб-платформа для заказа услуг мастеров ручного труда (рукоделия). Пользователи могут заказывать услуги (например, вязание носков, вышивка, изготовление игрушек), а мастера предоставляют свои услуги, получают заказы и отзывы.

### 1.2 Целевая аудитория
- **Заказчики**: пользователи, желающие заказать изделия ручной работы
- **Мастера**: специалисты, предоставляющие услуги по рукоделию

### 1.3 Бизнес-цели
- Создать удобную платформу для связи заказчиков и мастеров
- Обеспечить прозрачность через систему рейтингов и отзывов
- Автоматизировать процесс оформления и отслеживания заказов
- Предоставить мастерам возможность продвижения своих услуг

## 2. Технологический стек

### 2.1 Frontend
- **Фреймворк**: React 19
- **Язык**: JavaScript (с возможностью миграции на TypeScript)
- **UI библиотека**: Shadcn/UI + Radix UI
- **Стилизация**: Tailwind CSS
- **Роутинг**: React Router DOM v7
- **HTTP клиент**: Axios
- **Формы**: React Hook Form + Zod
- **Иконки**: Lucide React

### 2.2 Backend
- **Фреймворк**: FastAPI 0.110.1
- **Язык**: Python 3.11+
- **ASGI сервер**: Uvicorn
- **База данных**: MongoDB 4.5
- **ODM**: Motor (async MongoDB driver)
- **Валидация**: Pydantic v2

### 2.3 Безопасность
- **Авторизация**: JWT (JSON Web Tokens)
- **Хеширование паролей**: bcrypt
- **CORS**: настроенный middleware

### 2.4 Хранение данных
- **База данных**: MongoDB
- **Изображения**: Base64 в MongoDB (для MVP)

### 2.5 Деплой
- **Контейнеризация**: Docker
- **Оркестрация**: Kubernetes
- **Управление процессами**: Supervisor

## 3. Функциональные требования

### 3.1 Модуль авторизации

#### 3.1.1 Регистрация
- Регистрация с email и паролем
- Выбор роли при регистрации (заказчик/мастер)
- Валидация email
- Проверка сложности пароля (минимум 6 символов)
- Уникальность email

#### 3.1.2 Вход в систему
- Аутентификация по email и паролю
- Получение JWT токена
- Автоматическое обновление токена

#### 3.1.3 Управление профилем
- Просмотр профиля
- Редактирование профиля
- Загрузка аватара
- Смена пароля

### 3.2 Модуль мастеров

#### 3.2.1 Профиль мастера
- Имя и контактная информация
- Описание (о себе, опыт работы)
- Специализация (виды рукоделия)
- Портфолио (галерея работ с изображениями)
- Общий рейтинг
- Количество выполненных заказов

#### 3.2.2 Управление услугами
- Создание услуги (название, описание, категория, примерная цена, срок выполнения)
- Редактирование услуги
- Удаление услуги
- Добавление изображений к услуге
- Активация/деактивация услуги

#### 3.2.3 Управление заказами
- Просмотр входящих заказов
- Принятие/отклонение заказа
- Изменение статуса заказа
- История заказов

### 3.3 Модуль заказчиков

#### 3.3.1 Поиск услуг
- Каталог всех услуг
- Фильтрация по категориям
- Поиск по ключевым словам
- Сортировка (по рейтингу, цене, дате)
- Просмотр детальной информации об услуге

#### 3.3.2 Оформление заказа
- Создание заказа на выбранную услугу
- Указание деталей заказа (описание, пожелания)
- Прикрепление файлов/изображений (при необходимости)

#### 3.3.3 Отслеживание заказов
- Просмотр списка заказов
- Просмотр статуса заказа
- История заказов

### 3.4 Модуль отзывов и рейтингов

#### 3.4.1 Создание отзыва
- Оценка от 1 до 5 звезд
- Текст отзыва
- Возможность оставить отзыв только после завершения заказа
- Один отзыв на один заказ

#### 3.4.2 Просмотр отзывов
- Отзывы на странице мастера
- Отзывы на странице услуги
- Сортировка отзывов (новые, лучшие)

#### 3.4.3 Рейтинг
- Автоматический расчет среднего рейтинга мастера
- Обновление рейтинга при добавлении нового отзыва

### 3.5 Модуль чата

#### 3.5.1 Обмен сообщениями
- Чат между заказчиком и мастером в контексте заказа
- Отправка текстовых сообщений
- Отображение времени отправки
- Отметка о прочтении (опционально)

#### 3.5.2 Список чатов
- Просмотр всех активных чатов
- Отображение последнего сообщения
- Уведомление о новых сообщениях

### 3.6 Модуль уведомлений

#### 3.6.1 Типы уведомлений
- Новый заказ (для мастера)
- Изменение статуса заказа (для заказчика)
- Новое сообщение в чате
- Новый отзыв (для мастера)

#### 3.6.2 Отображение уведомлений
- Счетчик непрочитанных уведомлений
- Список уведомлений
- Пометка как прочитанное

## 4. Нефункциональные требования

### 4.1 Производительность
- Время ответа API: < 500ms для 95% запросов
- Поддержка до 1000 одновременных пользователей
- Оптимизация загрузки изображений

### 4.2 Безопасность
- HTTPS для всех соединений
- JWT токены с истечением срока действия
- Защита от SQL-инъекций (не актуально для MongoDB)
- Защита от XSS и CSRF атак
- Валидация всех входных данных
- Хеширование паролей с использованием bcrypt

### 4.3 Надежность
- Обработка ошибок на всех уровнях
- Логирование всех критических операций
- Резервное копирование базы данных

### 4.4 Масштабируемость
- Горизонтальное масштабирование backend через Kubernetes
- Индексы в MongoDB для оптимизации запросов
- Кеширование часто запрашиваемых данных (будущее улучшение)

### 4.5 Удобство использования
- Адаптивный дизайн (mobile-first)
- Интуитивный интерфейс
- Минимальное количество шагов для ключевых операций
- Быстрая обратная связь (toasts, уведомления)

### 4.6 Совместимость
- Поддержка современных браузеров (Chrome, Firefox, Safari, Edge)
- Адаптивность для мобильных устройств

## 5. Ограничения MVP версии

### 5.1 Что НЕ входит в первую версию
- Платежная система (интеграция Stripe/PayPal)
- Email уведомления
- SMS уведомления
- Видео в портфолио
- Экспорт данных
- Расширенная аналитика
- Многоязычность
- Восстановление пароля по email
- Двухфакторная аутентификация

### 5.2 Технические ограничения
- Изображения хранятся в Base64 в MongoDB (не S3)
- Отсутствие realtime уведомлений (WebSocket)
- Базовая система поиска (без Elasticsearch)

## 6. Роли и права доступа

### 6.1 Заказчик (Customer)
**Может:**
- Просматривать каталог услуг
- Создавать заказы
- Оставлять отзывы
- Общаться с мастерами
- Редактировать свой профиль

**Не может:**
- Создавать услуги
- Видеть личные данные других пользователей
- Редактировать чужие отзывы

### 6.2 Мастер (Master)
**Может:**
- Все права заказчика
- Создавать и редактировать услуги
- Управлять заказами (принимать, менять статус)
- Просматривать свою статистику

**Не может:**
- Удалять отзывы о себе
- Редактировать рейтинг вручную
- Видеть личные данные заказчиков (кроме необходимых для заказа)

## 7. Сценарии использования

### 7.1 Регистрация и вход мастера
1. Пользователь переходит на страницу регистрации
2. Выбирает роль "Мастер"
3. Заполняет форму (имя, email, пароль)
4. Система создает аккаунт и автоматически авторизует
5. Мастер заполняет профиль (описание, специализация)
6. Создает первую услугу

### 7.2 Поиск и заказ услуги заказчиком
1. Заказчик просматривает каталог услуг
2. Использует фильтры (категория, цена)
3. Открывает детальную страницу услуги
4. Изучает профиль мастера и отзывы
5. Нажимает "Заказать"
6. Заполняет форму заказа (описание, пожелания)
7. Отправляет заказ
8. Получает уведомление о создании заказа

### 7.3 Обработка заказа мастером
1. Мастер получает уведомление о новом заказе
2. Просматривает детали заказа
3. Связывается с заказчиком через чат (при необходимости)
4. Принимает или отклоняет заказ
5. Если принял: меняет статус на "В работе"
6. По завершении работы меняет статус на "Выполнен"

### 7.4 Оставление отзыва
1. Заказчик получает уведомление о завершении заказа
2. Переходит на страницу заказа
3. Нажимает "Оставить отзыв"
4. Выбирает рейтинг (1-5 звезд)
5. Пишет текст отзыва
6. Отправляет отзыв
7. Рейтинг мастера автоматически обновляется

## 8. Критерии приемки

### 8.1 Backend
- ✅ Все API endpoints работают корректно
- ✅ JWT авторизация функционирует
- ✅ Валидация данных работает
- ✅ Обработка ошибок реализована
- ✅ Логирование настроено

### 8.2 Frontend
- ✅ Все страницы отображаются корректно
- ✅ Формы работают и валидируются
- ✅ Адаптивный дизайн работает на мобильных
- ✅ Навигация работает без ошибок
- ✅ Уведомления отображаются корректно

### 8.3 Интеграция
- ✅ Frontend успешно взаимодействует с Backend
- ✅ Авторизация работает end-to-end
- ✅ Изображения загружаются и отображаются
- ✅ Чат работает в реальном времени (polling)

### 8.4 Безопасность
- ✅ Пароли хешируются
- ✅ JWT токены проверяются
- ✅ Защищенные маршруты недоступны без авторизации
- ✅ Валидация входных данных

## 9. Метрики успеха

### 9.1 Технические метрики
- Время загрузки главной страницы < 2 секунд
- API response time < 500ms
- Отсутствие критических ошибок

### 9.2 Бизнес-метрики
- Успешная регистрация пользователей
- Создание услуг мастерами
- Создание заказов заказчиками
- Количество отзывов

## 10. Риски и митигация

### 10.1 Технические риски
| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|------------|
| Проблемы с производительностью при большом количестве изображений | Высокая | Высокое | Оптимизация размера изображений, переход на S3 в будущем |
| Уязвимости безопасности | Средняя | Критическое | Регулярные проверки безопасности, обновление зависимостей |
| Проблемы с масштабированием | Низкая | Среднее | Индексы в БД, горизонтальное масштабирование |

### 10.2 Бизнес-риски
| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|------------|
| Отсутствие мастеров | Средняя | Высокое | Маркетинговая кампания, удобный onboarding |
| Низкая конверсия заказов | Средняя | Среднее | Улучшение UX, система рекомендаций |
| Злоупотребления системой рейтинга | Низкая | Среднее | Модерация отзывов, защита от накрутки |
